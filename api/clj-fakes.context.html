<!DOCTYPE html PUBLIC ""
    "">
<html><head><meta charset="UTF-8" /><title>clj-fakes.context documentation</title><link rel="stylesheet" type="text/css" href="css/default.css" /><link rel="stylesheet" type="text/css" href="css/highlight.css" /><script type="text/javascript" src="js/highlight.min.js"></script><script type="text/javascript" src="js/jquery.min.js"></script><script type="text/javascript" src="js/page_effects.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div id="header"><h2>Generated by <a href="https://github.com/weavejester/codox">Codox</a></h2><h1><a href="index.html"><span class="project-title"><span class="project-name">Clj-fakes</span> <span class="project-version">0.12.0</span></span></a></h1></div><div class="sidebar primary"><h3 class="no-link"><span class="inner">Project</span></h3><ul class="index-link"><li class="depth-1 "><a href="index.html"><div class="inner">Index</div></a></li></ul><h3 class="no-link"><span class="inner">Namespaces</span></h3><ul><li class="depth-1"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>clj-fakes</span></div></div></li><li class="depth-2 branch current"><a href="clj-fakes.context.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>context</span></div></a></li><li class="depth-2"><a href="clj-fakes.core.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>core</span></div></a></li></ul></div><div class="sidebar secondary"><h3><a href="#top"><span class="inner">Public Vars</span></a></h3><ul><li class="depth-1"><a href="clj-fakes.context.html#var-any"><div class="inner"><span>any</span></div></a></li><li class="depth-1"><a href="clj-fakes.context.html#var-arg"><div class="inner"><span>arg</span></div></a></li><li class="depth-1"><a href="clj-fakes.context.html#var-arg*"><div class="inner"><span>arg*</span></div></a></li><li class="depth-1"><a href="clj-fakes.context.html#var-ArgMatcher"><div class="inner"><span>ArgMatcher</span></div></a></li><li class="depth-2"><a href="clj-fakes.context.html#var-arg-matches.3F"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>arg-matches?</span></div></a></li><li class="depth-1"><a href="clj-fakes.context.html#var-ArgsMatcher"><div class="inner"><span>ArgsMatcher</span></div></a></li><li class="depth-2 branch"><a href="clj-fakes.context.html#var-args-match.3F"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>args-match?</span></div></a></li><li class="depth-2"><a href="clj-fakes.context.html#var-args-matcher-.3Estr"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>args-matcher-&gt;str</span></div></a></li><li class="depth-1"><a href="clj-fakes.context.html#var-calls"><div class="inner"><span>calls</span></div></a></li><li class="depth-1"><a href="clj-fakes.context.html#var-context"><div class="inner"><span>context</span></div></a></li><li class="depth-1"><a href="clj-fakes.context.html#var-cyclically"><div class="inner"><span>cyclically</span></div></a></li><li class="depth-1"><a href="clj-fakes.context.html#var-default-fake-config"><div class="inner"><span>default-fake-config</span></div></a></li><li class="depth-1"><a href="clj-fakes.context.html#var-fake"><div class="inner"><span>fake</span></div></a></li><li class="depth-1"><a href="clj-fakes.context.html#var-fake*"><div class="inner"><span>fake*</span></div></a></li><li class="depth-1"><a href="clj-fakes.context.html#var-ImplicitArgMatcher"><div class="inner"><span>ImplicitArgMatcher</span></div></a></li><li class="depth-2 branch"><a href="clj-fakes.context.html#var-arg-matcher-.3Estr"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>arg-matcher-&gt;str</span></div></a></li><li class="depth-2"><a href="clj-fakes.context.html#var-arg-matches-implicitly.3F"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>arg-matches-implicitly?</span></div></a></li><li class="depth-1"><a href="clj-fakes.context.html#var-mark-checked"><div class="inner"><span>mark-checked</span></div></a></li><li class="depth-1"><a href="clj-fakes.context.html#var-method"><div class="inner"><span>method</span></div></a></li><li class="depth-1"><a href="clj-fakes.context.html#var-method-was-called"><div class="inner"><span>method-was-called</span></div></a></li><li class="depth-1"><a href="clj-fakes.context.html#var-method-was-called-once"><div class="inner"><span>method-was-called-once</span></div></a></li><li class="depth-1"><a href="clj-fakes.context.html#var-method-was-matched-once"><div class="inner"><span>method-was-matched-once</span></div></a></li><li class="depth-1"><a href="clj-fakes.context.html#var-method-was-not-called"><div class="inner"><span>method-was-not-called</span></div></a></li><li class="depth-1"><a href="clj-fakes.context.html#var-methods-were-called-in-order"><div class="inner"><span>methods-were-called-in-order</span></div></a></li><li class="depth-1"><a href="clj-fakes.context.html#var-optional-fake"><div class="inner"><span>optional-fake</span></div></a></li><li class="depth-1"><a href="clj-fakes.context.html#var-original-val"><div class="inner"><span>original-val</span></div></a></li><li class="depth-1"><a href="clj-fakes.context.html#var-patch.21"><div class="inner"><span>patch!</span></div></a></li><li class="depth-1"><a href="clj-fakes.context.html#var-recorded-fake"><div class="inner"><span>recorded-fake</span></div></a></li><li class="depth-1"><a href="clj-fakes.context.html#var-recorded-fake*"><div class="inner"><span>recorded-fake*</span></div></a></li><li class="depth-1"><a href="clj-fakes.context.html#var-reify-fake"><div class="inner"><span>reify-fake</span></div></a></li><li class="depth-1"><a href="clj-fakes.context.html#var-reify-fake*"><div class="inner"><span>reify-fake*</span></div></a></li><li class="depth-1"><a href="clj-fakes.context.html#var-reify-nice-fake"><div class="inner"><span>reify-nice-fake</span></div></a></li><li class="depth-1"><a href="clj-fakes.context.html#var-reify-nice-fake*"><div class="inner"><span>reify-nice-fake*</span></div></a></li><li class="depth-1"><a href="clj-fakes.context.html#var-self-test"><div class="inner"><span>self-test</span></div></a></li><li class="depth-1"><a href="clj-fakes.context.html#var-self-test-unchecked-fakes"><div class="inner"><span>self-test-unchecked-fakes</span></div></a></li><li class="depth-1"><a href="clj-fakes.context.html#var-self-test-unused-fakes"><div class="inner"><span>self-test-unused-fakes</span></div></a></li><li class="depth-1"><a href="clj-fakes.context.html#var-unpatch.21"><div class="inner"><span>unpatch!</span></div></a></li><li class="depth-1"><a href="clj-fakes.context.html#var-unpatch-all.21"><div class="inner"><span>unpatch-all!</span></div></a></li><li class="depth-1"><a href="clj-fakes.context.html#var-was-called"><div class="inner"><span>was-called</span></div></a></li><li class="depth-1"><a href="clj-fakes.context.html#var-was-called-once"><div class="inner"><span>was-called-once</span></div></a></li><li class="depth-1"><a href="clj-fakes.context.html#var-was-matched-once"><div class="inner"><span>was-matched-once</span></div></a></li><li class="depth-1"><a href="clj-fakes.context.html#var-was-not-called"><div class="inner"><span>was-not-called</span></div></a></li><li class="depth-1"><a href="clj-fakes.context.html#var-were-called-in-order"><div class="inner"><span>were-called-in-order</span></div></a></li></ul></div><div class="namespace-docs" id="content"><h1 class="anchor" id="top">clj-fakes.context</h1><div class="doc"><div class="markdown"><p>API for working in explicit context.</p></div></div><div class="public anchor" id="var-any"><h3>any</h3><div class="usage"></div><div class="doc"><div class="markdown"><p>Matcher which matches any value. Implements both <a href="clj-fakes.context.html#var-ArgsMatcher">ArgsMatcher</a> and <a href="clj-fakes.context.html#var-ImplicitArgMatcher">ImplicitArgMatcher</a>.</p></div></div><div class="src-link"><a href="https://github.com/metametadata/clj-fakes/blob/master/src/clj_fakes/context.cljc#L75">view source</a></div></div><div class="public anchor" id="var-arg"><h3>arg</h3><h4 class="type">macro</h4><div class="usage"><code>(arg matcher)</code></div><div class="doc"><div class="markdown"><p>Creates an <a href="clj-fakes.context.html#var-ImplicitArgMatcher">ImplicitArgMatcher</a> from the specified <a href="clj-fakes.context.html#var-ArgMatcher">ArgMatcher</a> to be used in vector args matcher.</p></div></div><div class="src-link"><a href="https://github.com/metametadata/clj-fakes/blob/master/src/clj_fakes/context.cljc#L119">view source</a></div></div><div class="public anchor" id="var-arg*"><h3>arg*</h3><div class="usage"><code>(arg* matcher matcher-str)</code></div><div class="doc"><div class="markdown"><p>The same as <a href="clj-fakes.context.html#var-arg">arg</a> macro, but string for printing the matcher must be specified explicitly.</p></div></div><div class="src-link"><a href="https://github.com/metametadata/clj-fakes/blob/master/src/clj_fakes/context.cljc#L110">view source</a></div></div><div class="public anchor" id="var-ArgMatcher"><h3>ArgMatcher</h3><h4 class="type">protocol</h4><div class="usage"></div><div class="doc"><div class="markdown"><p>Protocol for explicit arg matchers.</p>
<p>Also see: <a href="clj-fakes.context.html#var-arg">arg</a>.</p></div></div><div class="members"><h4>members</h4><div class="inner"><div class="public anchor" id="var-arg-matches.3F"><h3>arg-matches?</h3><div class="usage"><code>(arg-matches? this arg)</code></div><div class="doc"><div class="markdown"><p>Should return true or false.</p></div></div></div></div></div><div class="src-link"><a href="https://github.com/metametadata/clj-fakes/blob/master/src/clj_fakes/context.cljc#L69">view source</a></div></div><div class="public anchor" id="var-ArgsMatcher"><h3>ArgsMatcher</h3><h4 class="type">protocol</h4><div class="usage"></div><div class="doc"><div class="markdown"><p>Protocol for multiple args matching.</p></div></div><div class="members"><h4>members</h4><div class="inner"><div class="public anchor" id="var-args-match.3F"><h3>args-match?</h3><div class="usage"><code>(args-match? this args)</code></div><div class="doc"><div class="markdown"><p>Should return true or false.</p></div></div></div><div class="public anchor" id="var-args-matcher-.3Estr"><h3>args-matcher-&gt;str</h3><div class="usage"><code>(args-matcher-&gt;str this)</code></div><div class="doc"><div class="markdown"><p>Should return a string for debug messages.</p></div></div></div></div></div><div class="src-link"><a href="https://github.com/metametadata/clj-fakes/blob/master/src/clj_fakes/context.cljc#L58">view source</a></div></div><div class="public anchor" id="var-calls"><h3>calls</h3><div class="usage"><code>(calls ctx)</code><code>(calls ctx f)</code></div><div class="doc"><div class="markdown"><p>For the specified recorded fake returns a vector of its calls. Returned vector is ordered by call time: the earliest call will be at the head.</p>
<p>A call is a map with keys: <code>:args</code>, <code>:return-value</code>.</p>
<p>If fake is not specified then it will return all the calls recorded in the context:</p>
<pre><code class="clj">[[recorded-fake1 call1]
 [recorded-fake2 call2]
 ...]
</code></pre></div></div><div class="src-link"><a href="https://github.com/metametadata/clj-fakes/blob/master/src/clj_fakes/context.cljc#L383">view source</a></div></div><div class="public anchor" id="var-context"><h3>context</h3><div class="usage"><code>(context)</code></div><div class="doc"><div class="markdown"><p>Creates a new context atom.</p>
<p>Do not alter the atom manually, context fields should be considered a private API.</p>
<p>Also see: <a href="clj-fakes.core.html#var-with-fakes">clj-fakes.core/with-fakes</a>.</p></div></div><div class="src-link"><a href="https://github.com/metametadata/clj-fakes/blob/master/src/clj_fakes/context.cljc#L23">view source</a></div></div><div class="public anchor" id="var-cyclically"><h3>cyclically</h3><div class="usage"><code>(cyclically coll)</code></div><div class="doc"><div class="markdown"><p>Returns a function that:</p>
<ol>
  <li>takes any number of arguments;</li>
  <li>on each call returns the next value from <code>coll</code>, cyclically.</li>
</ol></div></div><div class="src-link"><a href="https://github.com/metametadata/clj-fakes/blob/master/src/clj_fakes/context.cljc#L1059">view source</a></div></div><div class="public anchor" id="var-default-fake-config"><h3>default-fake-config</h3><div class="usage"></div><div class="doc"><div class="markdown"><p>With this config fake will return a new <code>FakeReturnValue</code> type instance for any combination of args.</p></div></div><div class="src-link"><a href="https://github.com/metametadata/clj-fakes/blob/master/src/clj_fakes/context.cljc#L285">view source</a></div></div><div class="public anchor" id="var-fake"><h3>fake</h3><h4 class="type">macro</h4><div class="usage"><code>(fake ctx config)</code></div><div class="doc"><div class="markdown"><p>Creates a fake function. The created function must be called; otherwise, <a href="clj-fakes.context.html#var-self-test-unused-fakes">self-test-unused-fakes</a> will fail.</p>
<p>Config is a vector of pairs: <code>[args-matcher1 fn-or-value1 args-matcher2 fn-or-value2 ...]</code></p>
<p>Use <a href="clj-fakes.context.html#var-fake*">fake*</a> in case this macro is called from another macro.</p></div></div><div class="src-link"><a href="https://github.com/metametadata/clj-fakes/blob/master/src/clj_fakes/context.cljc#L335">view source</a></div></div><div class="public anchor" id="var-fake*"><h3>fake*</h3><h4 class="type">macro</h4><div class="usage"><code>(fake* ctx form config)</code></div><div class="doc"><div class="markdown"><p>The same as <a href="clj-fakes.context.html#var-fake">fake</a> macro but for reuse in other macros.</p>
<p><code>form</code> must be passed from the parent macro in order to correctly detect position.</p></div></div><div class="src-link"><a href="https://github.com/metametadata/clj-fakes/blob/master/src/clj_fakes/context.cljc#L327">view source</a></div></div><div class="public anchor" id="var-ImplicitArgMatcher"><h3>ImplicitArgMatcher</h3><h4 class="type">protocol</h4><div class="usage"></div><div class="doc"><div class="markdown"><p>Most likely you shouldn’t use this protocol. Consider creating explicit custom matchers by implementing <a href="clj-fakes.context.html#var-ArgMatcher">ArgMatcher</a> protocol and using <a href="clj-fakes.context.html#var-arg">arg</a> macro.</p></div></div><div class="members"><h4>members</h4><div class="inner"><div class="public anchor" id="var-arg-matcher-.3Estr"><h3>arg-matcher-&gt;str</h3><div class="usage"><code>(arg-matcher-&gt;str this)</code></div><div class="doc"><div class="markdown"><p>Should return a string for debug messages.</p></div></div></div><div class="public anchor" id="var-arg-matches-implicitly.3F"><h3>arg-matches-implicitly?</h3><div class="usage"><code>(arg-matches-implicitly? this arg)</code></div><div class="doc"><div class="markdown"><p>Should return true or false.</p></div></div></div></div></div><div class="src-link"><a href="https://github.com/metametadata/clj-fakes/blob/master/src/clj_fakes/context.cljc#L63">view source</a></div></div><div class="public anchor" id="var-mark-checked"><h3>mark-checked</h3><div class="usage"><code>(mark-checked ctx f)</code></div><div class="doc"><div class="markdown"><p>After using this function <a href="clj-fakes.context.html#var-self-test-unchecked-fakes">self-test-unchecked-fakes</a> will not warn about the specified recorded fake.</p></div></div><div class="src-link"><a href="https://github.com/metametadata/clj-fakes/blob/master/src/clj_fakes/context.cljc#L264">view source</a></div></div><div class="public anchor" id="var-method"><h3>method</h3><div class="usage"><code>(method ctx obj f)</code></div><div class="doc"><div class="markdown"><p>Returns a hash-key by which calls are recorded for the specified fake protocol instance method. Can be used in functions which take recorded fake as an input.</p></div></div><div class="src-link"><a href="https://github.com/metametadata/clj-fakes/blob/master/src/clj_fakes/context.cljc#L421">view source</a></div></div><div class="public anchor" id="var-method-was-called"><h3>method-was-called</h3><div class="usage"><code>(method-was-called ctx f obj args-matcher)</code></div><div class="doc"><div class="markdown"><p><a href="clj-fakes.context.html#var-was-called">was-called</a> for protocol method fakes.</p></div></div><div class="src-link"><a href="https://github.com/metametadata/clj-fakes/blob/master/src/clj_fakes/context.cljc#L962">view source</a></div></div><div class="public anchor" id="var-method-was-called-once"><h3>method-was-called-once</h3><div class="usage"><code>(method-was-called-once ctx f obj args-matcher)</code></div><div class="doc"><div class="markdown"><p><a href="clj-fakes.context.html#var-was-called-once">was-called-once</a> for protocol method fakes.</p></div></div><div class="src-link"><a href="https://github.com/metametadata/clj-fakes/blob/master/src/clj_fakes/context.cljc#L956">view source</a></div></div><div class="public anchor" id="var-method-was-matched-once"><h3>method-was-matched-once</h3><div class="usage"><code>(method-was-matched-once ctx f obj args-matcher)</code></div><div class="doc"><div class="markdown"><p><a href="clj-fakes.context.html#var-was-matched-once">was-matched-once</a> for protocol method fakes.</p></div></div><div class="src-link"><a href="https://github.com/metametadata/clj-fakes/blob/master/src/clj_fakes/context.cljc#L968">view source</a></div></div><div class="public anchor" id="var-method-was-not-called"><h3>method-was-not-called</h3><div class="usage"><code>(method-was-not-called ctx f obj)</code></div><div class="doc"><div class="markdown"><p><a href="clj-fakes.context.html#var-was-not-called">was-not-called</a> for protocol method fakes.</p></div></div><div class="src-link"><a href="https://github.com/metametadata/clj-fakes/blob/master/src/clj_fakes/context.cljc#L974">view source</a></div></div><div class="public anchor" id="var-methods-were-called-in-order"><h3>methods-were-called-in-order</h3><div class="usage"><code>(methods-were-called-in-order ctx &amp; fns-objs-and-matchers)</code></div><div class="doc"><div class="markdown"><p><a href="clj-fakes.context.html#var-were-called-in-order">were-called-in-order</a> for protocol method fakes.</p>
<p>Syntax:</p>
<pre><code>(methods-were-called-in-order ctx
  f1 obj1 args-matcher1
  f2 obj2 args-matcher2
  ...)
</code></pre></div></div><div class="src-link"><a href="https://github.com/metametadata/clj-fakes/blob/master/src/clj_fakes/context.cljc#L980">view source</a></div></div><div class="public anchor" id="var-optional-fake"><h3>optional-fake</h3><div class="usage"><code>(optional-fake ctx)</code><code>(optional-fake ctx config)</code></div><div class="doc"><div class="markdown"><p>Creates an optional fake function which will not be checked by <a href="clj-fakes.context.html#var-self-test-unused-fakes">self-test-unused-fakes</a>, i.e. created fake is allowed to be never called.</p>
<p>Config is a vector of pairs: <code>[args-matcher1 fn-or-value1 args-matcher2 fn-or-value2 ...]</code></p>
<p>If <code>config</code> is not specified then fake will be created with <a href="clj-fakes.context.html#var-default-fake-config">default-fake-config</a>.</p></div></div><div class="src-link"><a href="https://github.com/metametadata/clj-fakes/blob/master/src/clj_fakes/context.cljc#L289">view source</a></div></div><div class="public anchor" id="var-original-val"><h3>original-val</h3><div class="usage"><code>(original-val ctx a-var)</code></div><div class="doc"><div class="markdown"><p>Given a patched variable returns its original value.</p></div></div><div class="src-link"><a href="https://github.com/metametadata/clj-fakes/blob/master/src/clj_fakes/context.cljc#L1015">view source</a></div></div><div class="public anchor" id="var-patch.21"><h3>patch!</h3><h4 class="type">macro</h4><div class="usage"><code>(patch! ctx var-expr val)</code></div><div class="doc"><div class="markdown"><p>Changes variable value in all threads.</p></div></div><div class="src-link"><a href="https://github.com/metametadata/clj-fakes/blob/master/src/clj_fakes/context.cljc#L1035">view source</a></div></div><div class="public anchor" id="var-recorded-fake"><h3>recorded-fake</h3><h4 class="type">macro</h4><div class="usage"><code>(recorded-fake ctx)</code><code>(recorded-fake ctx config)</code></div><div class="doc"><div class="markdown"><p>Creates a fake function whose calls will be recorded.</p>
<p>Config is a vector of pairs: <code>[args-matcher1 fn-or-value1 args-matcher2 fn-or-value2 ...]</code></p>
<p>Ultimatelly, the created function must be marked checked (see <a href="clj-fakes.context.html#var-mark-checked">mark-checked</a>); otherwise, <a href="clj-fakes.context.html#var-self-test-unchecked-fakes">self-test-unchecked-fakes</a> will fail.</p>
<p>Use <a href="clj-fakes.context.html#var-recorded-fake*">recorded-fake*</a> in case this macro is called from another macro.</p></div></div><div class="src-link"><a href="https://github.com/metametadata/clj-fakes/blob/master/src/clj_fakes/context.cljc#L358">view source</a></div></div><div class="public anchor" id="var-recorded-fake*"><h3>recorded-fake*</h3><h4 class="type">macro</h4><div class="usage"><code>(recorded-fake* ctx form)</code><code>(recorded-fake* ctx form config)</code></div><div class="doc"><div class="markdown"><p>This is the same as <a href="clj-fakes.context.html#var-recorded-fake">recorded-fake</a> macro but for reuse in other macros.</p>
<p><code>form</code> must be passed from the parent macro in order to correctly detect position.</p></div></div><div class="src-link"><a href="https://github.com/metametadata/clj-fakes/blob/master/src/clj_fakes/context.cljc#L350">view source</a></div></div><div class="public anchor" id="var-reify-fake"><h3>reify-fake</h3><h4 class="type">macro</h4><div class="usage"><code>(reify-fake ctx &amp; specs)</code></div><div class="doc"><div class="markdown"><p>Works similarly to <code>reify</code> macro, but implements methods in terms of fake functions. Created instance will raise an exception on calling protocol method which is not defined.</p>
<p>Supported fake types: <code>:optional-fake</code>, <code>:fake</code>, <code>:recorded-fake</code>.</p>
<p>Syntax example:</p>
<pre><code class="clj">(reify-fake my-context
  protocol-or-interface-or-Object
  [method1 :optional-fake [any 123]]

  protocol-or-interface-or-Object
  [method2 :recorded-fake]

  ; reification of Object with arbitrary methods works only in ClojureScript, note how arglist must be explicitly provided:
  Object
  [new-method3 [x y z] :recorded-fake])
</code></pre></div></div><div class="src-link"><a href="https://github.com/metametadata/clj-fakes/blob/master/src/clj_fakes/context.cljc#L768">view source</a></div></div><div class="public anchor" id="var-reify-fake*"><h3>reify-fake*</h3><h4 class="type">macro</h4><div class="usage"><code>(reify-fake* ctx form env &amp; specs)</code></div><div class="doc"><div class="markdown"><p>The same as <a href="clj-fakes.context.html#var-reify-fake">reify-fake</a> but to be used inside macros.</p>
<p><code>form</code> is needed to correctly determine fake positions, <code>env</code> is needed to determine target language.</p></div></div><div class="src-link"><a href="https://github.com/metametadata/clj-fakes/blob/master/src/clj_fakes/context.cljc#L746">view source</a></div></div><div class="public anchor" id="var-reify-nice-fake"><h3>reify-nice-fake</h3><h4 class="type">macro</h4><div class="usage"><code>(reify-nice-fake ctx &amp; specs)</code></div><div class="doc"><div class="markdown"><p>Works similarly to <a href="clj-fakes.context.html#var-reify-fake">reify-fake</a>, but automatically generates <code>:optional-fake</code> implementations for methods which are not explicitly defined by user.</p>
<p>It cannot yet automatically fake Java interface and <code>Object</code> methods.</p></div></div><div class="src-link"><a href="https://github.com/metametadata/clj-fakes/blob/master/src/clj_fakes/context.cljc#L792">view source</a></div></div><div class="public anchor" id="var-reify-nice-fake*"><h3>reify-nice-fake*</h3><h4 class="type">macro</h4><div class="usage"><code>(reify-nice-fake* ctx form env &amp; specs)</code></div><div class="doc"><div class="markdown"><p>The same as <a href="clj-fakes.context.html#var-reify-nice-fake">reify-nice-fake</a> but to be used inside macros.</p>
<p><code>form</code> is needed to correctly determine fake positions, <code>env</code> is needed to determine target language.</p></div></div><div class="src-link"><a href="https://github.com/metametadata/clj-fakes/blob/master/src/clj_fakes/context.cljc#L760">view source</a></div></div><div class="public anchor" id="var-self-test"><h3>self-test</h3><div class="usage"><code>(self-test ctx)</code></div><div class="doc"><div class="markdown"><p>Runs all available self-tests.</p></div></div><div class="src-link"><a href="https://github.com/metametadata/clj-fakes/blob/master/src/clj_fakes/context.cljc#L830">view source</a></div></div><div class="public anchor" id="var-self-test-unchecked-fakes"><h3>self-test-unchecked-fakes</h3><div class="usage"><code>(self-test-unchecked-fakes ctx)</code></div><div class="doc"><div class="markdown"><p>Raises an exception if some recorded fake was never marked checked, i.e. you forgot to assert its calls.</p></div></div><div class="src-link"><a href="https://github.com/metametadata/clj-fakes/blob/master/src/clj_fakes/context.cljc#L820">view source</a></div></div><div class="public anchor" id="var-self-test-unused-fakes"><h3>self-test-unused-fakes</h3><div class="usage"><code>(self-test-unused-fakes ctx)</code></div><div class="doc"><div class="markdown"><p>Raises an exception when some fake was never called after its creation.</p></div></div><div class="src-link"><a href="https://github.com/metametadata/clj-fakes/blob/master/src/clj_fakes/context.cljc#L810">view source</a></div></div><div class="public anchor" id="var-unpatch.21"><h3>unpatch!</h3><div class="usage"><code>(unpatch! ctx a-var)</code></div><div class="doc"><div class="markdown"><p>Restores original variable value.</p></div></div><div class="src-link"><a href="https://github.com/metametadata/clj-fakes/blob/master/src/clj_fakes/context.cljc#L1045">view source</a></div></div><div class="public anchor" id="var-unpatch-all.21"><h3>unpatch-all!</h3><div class="usage"><code>(unpatch-all! ctx)</code></div><div class="doc"><div class="markdown"><p>Restores original values for all the variables patched in the specified context.</p></div></div><div class="src-link"><a href="https://github.com/metametadata/clj-fakes/blob/master/src/clj_fakes/context.cljc#L1052">view source</a></div></div><div class="public anchor" id="var-was-called"><h3>was-called</h3><div class="usage"><code>(was-called ctx f args-matcher)</code></div><div class="doc"><div class="markdown"><p>Checks that recorded fake was called at least once with the specified args. Returns true or raises an exception.</p></div></div><div class="src-link"><a href="https://github.com/metametadata/clj-fakes/blob/master/src/clj_fakes/context.cljc#L879">view source</a></div></div><div class="public anchor" id="var-was-called-once"><h3>was-called-once</h3><div class="usage"><code>(was-called-once ctx f args-matcher)</code></div><div class="doc"><div class="markdown"><p>Checks that recorded fake was called strictly once and that the call was with the specified args. Returns true or raises an exception.</p></div></div><div class="src-link"><a href="https://github.com/metametadata/clj-fakes/blob/master/src/clj_fakes/context.cljc#L870">view source</a></div></div><div class="public anchor" id="var-was-matched-once"><h3>was-matched-once</h3><div class="usage"><code>(was-matched-once ctx f args-matcher)</code></div><div class="doc"><div class="markdown"><p>Checks that recorded fake was called at least once and only a single call satisfies the provided args matcher. Returns true or raises an exception.</p></div></div><div class="src-link"><a href="https://github.com/metametadata/clj-fakes/blob/master/src/clj_fakes/context.cljc#L888">view source</a></div></div><div class="public anchor" id="var-was-not-called"><h3>was-not-called</h3><div class="usage"><code>(was-not-called ctx f)</code></div><div class="doc"><div class="markdown"><p>Checks that recorded fake was never called. Returns true or raises an exception.</p></div></div><div class="src-link"><a href="https://github.com/metametadata/clj-fakes/blob/master/src/clj_fakes/context.cljc#L897">view source</a></div></div><div class="public anchor" id="var-were-called-in-order"><h3>were-called-in-order</h3><div class="usage"><code>(were-called-in-order ctx &amp; fns-and-matchers)</code></div><div class="doc"><div class="markdown"><p>Checks that recorded fakes were called in the specified order with the specified args. It does not check that there were no other calls.</p>
<p>Syntax: <code>
(were-called-in-order ctx
  f1 args-matcher1
  f2 args-matcher2
  ...)
</code></p>
<p>Returns true or raises an exception.</p></div></div><div class="src-link"><a href="https://github.com/metametadata/clj-fakes/blob/master/src/clj_fakes/context.cljc#L912">view source</a></div></div></div></body></html>